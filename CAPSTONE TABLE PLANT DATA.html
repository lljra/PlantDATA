<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LED Plant Growth Table</title>
    <style>
        body {
            background-color: beige;
            font-family: Times New Roman, serif;
            text-align: center;
        }
        h1 {
            font-size: 24px;
            font-weight: bold;
        }
        .table-container {
            overflow-x: auto;
            margin-bottom: 30px;
        }
        table {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            border-collapse: collapse;
            background-color: #fdfde7;
            border: 2px solid black;
        }
        th, td {
            border: 1px solid black;
            padding: 4px;
            text-align: center;
        }
        th {
            background-color: #e6e6d1;
            font-weight: bold;
        }
        td input {
            width: 100%;
            border: none;
            background: transparent;
            text-align: center;
        }
        .expand-btn {
            cursor: pointer;
            background: none;
            border: none;
            font-size: 16px;
        }
        .hidden-row {
            display: none;
        }
        .hidden-table {
            width: 95%;
            margin: 10px auto;
            border: 1px solid #aaa;
            background-color: #f8f8f8;
        }
        .delete-btn {
            display: none;
            margin-left: 10px;
            cursor: pointer;
            color: red;
            background: none;
            border: none;
            font-size: 16px;
        }
        tr:hover .delete-btn {
            display: inline;
        }
        button {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            background-color: #4CAF50;
            color: white;
            border-radius: 5px;
        }
        #reset {
            background-color: #f44336;
        }
        #saveIndicator {
            margin-top: 10px;
            font-size: 14px;
            color: green;
            display: none;
        }
    </style>
</head>
<body>
    <h1>Light Emitting Diode (LED) used in planting</h1>
    
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Show History</th>
                    <th>PLANT</th>
                    <th>GERMINATION TIME</th>
                    <th>HEIGHT</th>
                    <th>LEAF FORMATION</th>
                    <th>DATE</th>
                </tr>
            </thead>
	    <thead>
            <tbody id="mainTableBody">
                <tr class="main-row">
                    <td><button class="expand-btn">+</button></td>
                    <td>A</td>
                    <td><input type="text" placeholder="Germination Time"></td>
                    <td><input type="text" placeholder="Height"></td>
                    <td><input type="text" placeholder="Plant Information"></td>
                    <td><input type="text" placeholder="Date"></td>
                </tr>
		<tr class="hidden-row">
                    <td colspan="6">
                        <table class="hidden-table">
                            <tr><th>Height</th><th>Leaf Information</th><th>Date</th><th>-</th></tr>
                            <tbody class="hidden-tbody">
                                <tr>
                                    <td><input type="text" placeholder="Enter Height"></td>
                                    <td><input type="text" placeholder="Enter Leaf Information"></td>
                                    <td><input type="text" placeholder="Enter Date"></td>
                                    <td><button class="delete-btn">✖</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="add-row-btn">Add Row</button>
                    </td>
                </tr>
          	<tr class="main-row">
                    <td><button class="expand-btn">+</button></td>
                    <td>B</td>
                    <td><input type="text" placeholder="Germination Time"></td>
                    <td><input type="text" placeholder="Height"></td>
                    <td><input type="text" placeholder="Plant Information"></td>
                    <td><input type="text" placeholder="Date"></td>
                </tr>
		<tr class="hidden-row">
                    <td colspan="6">
                        <table class="hidden-table">
                            <tr><th>Height</th><th>Leaf Information</th><th>Date</th><th>-</th></tr>
                            <tbody class="hidden-tbody">
                                <tr>
                                    <td><input type="text" placeholder="Enter Height"></td>
                                    <td><input type="text" placeholder="Enter Leaf Information"></td>
                                    <td><input type="text" placeholder="Enter Date"></td>
                                    <td><button class="delete-btn">✖</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="add-row-btn">Add Row</button>
                    </td>
                </tr>
		<tr class="main-row">
                    <td><button class="expand-btn">+</button></td>
                    <td>C</td>
                    <td><input type="text" placeholder="Germination Time"></td>
                    <td><input type="text" placeholder="Height"></td>
                    <td><input type="text" placeholder="Plant Information"></td>
                    <td><input type="text" placeholder="Date"></td>
                </tr>
		<tr class="hidden-row">
                    <td colspan="6">
                        <table class="hidden-table">
                            <tr><th>Height</th><th>Leaf Information</th><th>Date</th><th>-</th></tr>
                            <tbody class="hidden-tbody">
                                <tr>
                                    <td><input type="text" placeholder="Enter Height"></td>
                                    <td><input type="text" placeholder="Enter Leaf Information"></td>
                                    <td><input type="text" placeholder="Enter Date"></td>
                                    <td><button class="delete-btn">✖</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="add-row-btn">Add Row</button>
                    </td>
                </tr>
		<tr class="main-row">
                    <td><button class="expand-btn">+</button></td>
                    <td>D</td>
                    <td><input type="text" placeholder="Germination Time"></td>
                    <td><input type="text" placeholder="Height"></td>
                    <td><input type="text" placeholder="Plant Information"></td>
                    <td><input type="text" placeholder="Date"></td>
                </tr>
                <tr class="hidden-row">
                    <td colspan="6">
                        <table class="hidden-table">
                            <tr><th>Height</th><th>Leaf Information</th><th>Date</th><th>-</th></tr>
                            <tbody class="hidden-tbody">
                                <tr>
                                    <td><input type="text" placeholder="Enter Height"></td>
                                    <td><input type="text" placeholder="Enter Leaf Information"></td>
                                    <td><input type="text" placeholder="Enter Date"></td>
                                    <td><button class="delete-btn">✖</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="add-row-btn">Add Row</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

<body>
    <h1>Sunlight</h1>
    
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Show History</th>
                    <th>PLANT</th>
                    <th>GERMINATION TIME</th>
                    <th>HEIGHT</th>
                    <th>LEAF FORMATION</th>
                    <th>DATE</th>
                </tr>
            </thead>
	    <thead>
            <tbody id="mainTableBody">
                <tr class="main-row">
                    <td><button class="expand-btn">+</button></td>
                    <td>A</td>
                    <td><input type="text" placeholder="Germination Time"></td>
                    <td><input type="text" placeholder="Height"></td>
                    <td><input type="text" placeholder="Plant Information"></td>
                    <td><input type="text" placeholder="Date"></td>
                </tr>
		<tr class="hidden-row">
                    <td colspan="6">
                        <table class="hidden-table">
                            <tr><th>Height</th><th>Leaf Information</th><th>Date</th><th>-</th></tr>
                            <tbody class="hidden-tbody">
                                <tr>
                                    <td><input type="text" placeholder="Enter Height"></td>
                                    <td><input type="text" placeholder="Enter Leaf Information"></td>
                                    <td><input type="text" placeholder="Enter Date"></td>
                                    <td><button class="delete-btn">✖</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="add-row-btn">Add Row</button>
                    </td>
                </tr>
          	<tr class="main-row">
                    <td><button class="expand-btn">+</button></td>
                    <td>B</td>
                    <td><input type="text" placeholder="Germination Time"></td>
                    <td><input type="text" placeholder="Height"></td>
                    <td><input type="text" placeholder="Plant Information"></td>
                    <td><input type="text" placeholder="Date"></td>
                </tr>
		<tr class="hidden-row">
                    <td colspan="6">
                        <table class="hidden-table">
                            <tr><th>Height</th><th>Leaf Information</th><th>Date</th><th>-</th></tr>
                            <tbody class="hidden-tbody">
                                <tr>
                                    <td><input type="text" placeholder="Enter Height"></td>
                                    <td><input type="text" placeholder="Enter Leaf Information"></td>
                                    <td><input type="text" placeholder="Enter Date"></td>
                                    <td><button class="delete-btn">✖</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="add-row-btn">Add Row</button>
                    </td>
                </tr>
		<tr class="main-row">
                    <td><button class="expand-btn">+</button></td>
                    <td>C</td>
                    <td><input type="text" placeholder="Germination Time"></td>
                    <td><input type="text" placeholder="Height"></td>
                    <td><input type="text" placeholder="Plant Information"></td>
                    <td><input type="text" placeholder="Date"></td>
                </tr>
		<tr class="hidden-row">
                    <td colspan="6">
                        <table class="hidden-table">
                            <tr><th>Height</th><th>Leaf Information</th><th>Date</th><th>-</th></tr>
                            <tbody class="hidden-tbody">
                                <tr>
                                    <td><input type="text" placeholder="Enter Height"></td>
                                    <td><input type="text" placeholder="Enter Leaf Information"></td>
                                    <td><input type="text" placeholder="Enter Date"></td>
                                    <td><button class="delete-btn">✖</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="add-row-btn">Add Row</button>
                    </td>
                </tr>
		<tr class="main-row">
                    <td><button class="expand-btn">+</button></td>
                    <td>D</td>
                    <td><input type="text" placeholder="Germination Time"></td>
                    <td><input type="text" placeholder="Height"></td>
                    <td><input type="text" placeholder="Plant Information"></td>
                    <td><input type="text" placeholder="Date"></td>
                </tr>
                <tr class="hidden-row">
                    <td colspan="6">
                        <table class="hidden-table">
                            <tr><th>Height</th><th>Leaf Information</th><th>Date</th><th>-</th></tr>
                            <tbody class="hidden-tbody">
                                <tr>
                                    <td><input type="text" placeholder="Enter Height"></td>
                                    <td><input type="text" placeholder="Enter Leaf Information"></td>
                                    <td><input type="text" placeholder="Enter Date"></td>
                                    <td><button class="delete-btn">✖</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="add-row-btn">Add Row</button>
                    </td>
                </tr>
            </tbody>
        </table>
	<button onclick="saveData()">Save</button>
   	<p id="saveIndicator">Data saved successfully!</p>
    </div>
    <script>
        document.querySelectorAll(".expand-btn").forEach(button => {
            button.addEventListener("click", function () {
                let hiddenRow = this.closest("tr").nextElementSibling;
                hiddenRow.style.display = hiddenRow.style.display === "table-row" ? "none" : "table-row";
                this.textContent = this.textContent === "+" ? "-" : "+";
            });
        });

        document.querySelectorAll(".add-row-btn").forEach(button => {
            button.addEventListener("click", function () {
                let tbody = this.previousElementSibling.querySelector(".hidden-tbody");
                let newRow = document.createElement("tr");
                newRow.innerHTML = '<td><input type="text" placeholder="Enter Height"></td>' +
                                   '<td><input type="text" placeholder="Enter Leaf Information"></td>' +
                                   '<td><input type="text" placeholder="Enter Date"></td>' +
                                   '<td><button class="delete-btn">✖</button></td>';
                tbody.appendChild(newRow);
                attachDeleteFunction(newRow);
            });
        });

        function attachDeleteFunction(row) {
	    let deleteBtn = row.querySelector(".delete-btn");
	    if (deleteBtn) {
		deleteBtn.addEventListener("click", function () {
		    row.remove();
		});
	    }
	}

	// Ensure new rows have delete functionality when added
	document.querySelectorAll(".add-row-btn").forEach(button => {
	    button.addEventListener("click", function () {
	        let tbody = this.previousElementSibling.querySelector(".hidden-tbody");
	        let newRow = document.createElement("tr");
	        newRow.innerHTML = `
	            <td><input type="text" placeholder="Enter Height"></td>
	            <td><input type="text" placeholder="Enter Leaf Information"></td>
	            <td><input type="text" placeholder="Enter Date"></td>
	            <td><button class="delete-btn">✖</button></td>
	        `;
	        tbody.appendChild(newRow);
	        attachDeleteFunction(newRow);
	    });
	});

        function saveData() {
	    let allData = [];

	    document.querySelectorAll("tbody tr.main-row").forEach(mainRow => {
	        let rowData = {
	            plant: mainRow.children[1].textContent,
	            germinationTime: mainRow.children[2].querySelector("input").value,
	            height: mainRow.children[3].querySelector("input").value,
	            leafFormation: mainRow.children[4].querySelector("input").value,
	            date: mainRow.children[5].querySelector("input").value,
	            history: []
	        };
	
	        let hiddenTable = mainRow.nextElementSibling.querySelector(".hidden-tbody");
	        if (hiddenTable) {
	            hiddenTable.querySelectorAll("tr").forEach(hiddenRow => {
	                let inputs = hiddenRow.querySelectorAll("input");
	                if (inputs.length > 0) {
	                    let historyData = {
	                        height: inputs[0].value,
	                        leafInfo: inputs[1].value,
	                        date: inputs[2].value
	                    };
	                    rowData.history.push(historyData);
	                }
	            });
	        }

	        allData.push(rowData);
	    });

	    localStorage.setItem("tableData", JSON.stringify(allData));

	    let indicator = document.getElementById("saveIndicator");
	    indicator.style.display = "block";
	    setTimeout(() => {
	        indicator.style.display = "none";
	    }, 2000);
	}



        function loadData() {
	    let storedData = localStorage.getItem("tableData");
	    if (storedData) {
	        let allData = JSON.parse(storedData);
	        let mainRows = document.querySelectorAll("tbody tr.main-row");
	
	        allData.forEach((rowData, index) => {
	            if (mainRows[index]) {
	                mainRows[index].children[2].querySelector("input").value = rowData.germinationTime;
	                mainRows[index].children[3].querySelector("input").value = rowData.height;
	                mainRows[index].children[4].querySelector("input").value = rowData.leafFormation;
	                mainRows[index].children[5].querySelector("input").value = rowData.date;
	
	                let hiddenTable = mainRows[index].nextElementSibling.querySelector(".hidden-tbody");
	                if (hiddenTable) {
	                    hiddenTable.innerHTML = ""; // Clear existing rows before adding new ones
	                    rowData.history.forEach(historyData => {
	                        let newRow = document.createElement("tr");
	                        newRow.innerHTML = `
	                            <td><input type="text" value="${historyData.height}" placeholder="Enter Height"></td>
	                            <td><input type="text" value="${historyData.leafInfo}" placeholder="Enter Leaf Information"></td>
	                            <td><input type="text" value="${historyData.date}" placeholder="Enter Date"></td>
	                            <td><button class="delete-btn">✖</button></td>
	                        `;
	                        hiddenTable.appendChild(newRow);
	                        attachDeleteFunction(newRow);
	                    });
        	        }
	            }
	        });
	    }
	}

        window.onload = loadData;
    </script>
</body>